import{c as f,r as g,s as x,d as B,a as N,F as C,b as e,V as R,w as a,e as z,u as j,o as w,f as U,g as p,t as y,h as _,i as s,j as h,k as b,l as k,m as F,n as A,p as $,q as D,v as L,x as M,y as O,z as P,A as T,B as q}from"./index-B9Jqpssk.js";import{l as E}from"./dukanet-icon-B8EoOskA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const u=g(null);x.auth.getSession().then(({data:o})=>{var t;u.value=((t=o.session)==null?void 0:t.user)??null});x.auth.onAuthStateChange((o,t)=>{u.value=(t==null?void 0:t.user)??null});const H=f(()=>{var o,t;return((t=(o=u.value)==null?void 0:o.user_metadata)==null?void 0:t.avatar_url)??null}),W=f(()=>{var o,t;return((t=(o=u.value)==null?void 0:o.user_metadata)==null?void 0:t.email)??null}),Y=f(()=>{var o,t;return((t=(o=u.value)==null?void 0:o.user_metadata)==null?void 0:t.full_name)??null});function G(){return{avatarUrl:H,email:W,fullName:Y}}const J={class:"w-100 position-relative pa-2 d-flex align-center justify-center"},K={class:"text-caption text-onSurfaceVariant"},Q={class:"text-h6 barlow pa-2 text-onSurfaceVariant"},X={class:"text-onBackground fill-height d-flex align-center justify-center"},Z=B({__name:"DefaultAppbar",setup(o){const{avatarUrl:t,email:i,fullName:V}=G(),{notify:c}=O(),m=j(),r=g(!1),d=g(!1),I=f(()=>{var n;return((n=V.value)==null?void 0:n.split(" ")[0])??""}),S=async()=>{d.value=!0;const{error:n}=await x.auth.signOut();n?c({message:"We couldn't sign you out. Please try again.",color:"error"}):m.push("/auth"),d.value=!1};return(n,l)=>(w(),N(C,null,[e(R,{color:"surfaceVariant",modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=v=>r.value=v),location:"right",temporary:""},{default:a(()=>[e(U,{color:"surfaceVariant",class:"d-flex flex-column align-center"},{default:a(()=>[p("div",J,[p("div",K,y(_(i)),1),e(s,{icon:"mdi-close",variant:"text",size:"x-small",color:"onSurfaceVariant",onClick:l[0]||(l[0]=h(v=>r.value=!r.value,["stop"])),class:"position-absolute right-0"})]),e(b,{color:"primary"},{default:a(()=>[e(k,{src:_(t)},null,8,["src"])]),_:1}),p("div",Q,"Hi, "+y(I.value)+"!",1),e(F,null,{default:a(()=>[e(s,{"prepend-icon":"mdi-storefront-outline",text:"Add your business",class:"text-none justify-start rounded-t-xl rounded-b-0",color:"surface",variant:"flat",block:"",to:"/business"}),e(A),e(s,{"prepend-icon":"mdi-bookmark-outline",text:"Your saved items",class:"text-none justify-start rounded-0",color:"surface",variant:"flat",block:""}),e(A),e(s,{"prepend-icon":"mdi-logout",text:"Logout",class:"text-none justify-start rounded-b-xl rounded-t-0",color:"surface",variant:"flat",block:"",onClick:S,loading:d.value,disabled:d.value},null,8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(z,{density:"compact",elevation:"0","scroll-behavior":"hide",extended:""},{prepend:a(()=>[e(M,{variant:"plain",color:"onBackground",density:"comfortable"})]),title:a(()=>[p("div",X,[e(L,{size:"small",class:"mx-2"},{default:a(()=>[e(E)]),_:1}),l[3]||(l[3]=D(" dukanet "))])]),append:a(()=>[e(s,{icon:"mdi-bell-outline",color:"onBackground",density:"comfortable",variant:"plain"}),e(s,{icon:"",density:"comfortable",onClick:l[2]||(l[2]=h(v=>r.value=!r.value,["stop"]))},{default:a(()=>[e(b,{color:"primary",size:"x-small"},{default:a(()=>[e(k,{src:_(t)},null,8,["src"])]),_:1})]),_:1})]),extension:a(()=>[e($,{class:"px-4 pt-4",density:"compact","menu-icon":"",placeholder:"Search for Products","auto-select-first":"",rounded:"",variant:"outlined",color:"primary"},{"append-inner":a(()=>[e(s,{variant:"text",color:"primary",icon:"mdi-magnify",density:"compact"})]),_:1})]),_:1})],64))}}),oe=B({__name:"DefaultLayout",setup(o){const t=j(),i=localStorage.getItem("postAuthRedirect");return i?(localStorage.removeItem("postAuthRedirect"),t.replace(i)):t.replace("/"),(V,c)=>{const m=q("RouterView");return w(),N(C,null,[e(Z),e(P,null,{default:a(()=>[e(m)]),_:1}),e(T,null,{default:a(()=>c[0]||(c[0]=[D(" This is a footer ")])),_:1,__:[0]})],64)}}});export{oe as default};
