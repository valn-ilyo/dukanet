import{c as d,r as x,s as _,d as B,a as N,F as A,b as e,V as I,w as a,e as U,u as F,o as C,f as g,g as c,t as y,h as v,i as n,j as V,k as h,l as b,m as k,n as R,p as S,q as $,v as L,x as M,y as O,z as P,A as T}from"./index-BwCrZAP1.js";import{l as q}from"./dukanet-logo-CDi-5nVL.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const u=x(null);_.auth.getSession().then(({data:o})=>{var t;u.value=((t=o.session)==null?void 0:t.user)??null});_.auth.onAuthStateChange((o,t)=>{u.value=(t==null?void 0:t.user)??null});const E=d(()=>{var o,t;return((t=(o=u.value)==null?void 0:o.user_metadata)==null?void 0:t.avatar_url)??null}),H=d(()=>{var o,t;return((t=(o=u.value)==null?void 0:o.user_metadata)==null?void 0:t.email)??null}),W=d(()=>{var o,t;return((t=(o=u.value)==null?void 0:o.user_metadata)==null?void 0:t.full_name)??null});function Y(){return{avatarUrl:E,email:H,fullName:W}}const G={class:"w-100 position-relative pa-2 d-flex align-center justify-center"},J={class:"text-caption text-onSurfaceVariant"},K={class:"text-h6 barlow pa-2 text-onSurfaceVariant"},Q={class:"text-onBackground fill-height d-flex align-center justify-center"},X=B({__name:"DefaultAppbar",setup(o){const{avatarUrl:t,email:i,fullName:f}=Y(),{notify:j}=M(),w=F(),s=x(!1),p=x(!1),D=d(()=>{var r;return((r=f.value)==null?void 0:r.split(" ")[0])??""}),z=async()=>{p.value=!0;const{error:r}=await _.auth.signOut();r?j({message:"We couldn't sign you out. Please try again.",color:"error"}):w.push("/auth"),p.value=!1};return(r,l)=>(C(),N(A,null,[e(I,{color:"surfaceVariant",modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=m=>s.value=m),location:"right",temporary:""},{default:a(()=>[e(g,{color:"surfaceVariant",class:"d-flex flex-column align-center"},{default:a(()=>[c("div",G,[c("div",J,y(v(i)),1),e(n,{icon:"mdi-close",variant:"text",size:"x-small",color:"onSurfaceVariant",onClick:l[0]||(l[0]=V(m=>s.value=!s.value,["stop"])),class:"position-absolute right-0"})]),e(h,{color:"primary"},{default:a(()=>[e(b,{src:v(t)},null,8,["src"])]),_:1}),c("div",K,"Hi, "+y(D.value)+"!",1),e(g,{color:"surface",class:"rounded-xl"},{default:a(()=>[e(n,{"prepend-icon":"mdi-storefront-outline",text:"Add your business",class:"text-none justify-start rounded-t-xl",color:"onSurface",variant:"text",block:"",to:"/business"}),e(k),e(n,{"prepend-icon":"mdi-bookmark-outline",text:"Your saved items",class:"text-none justify-start",color:"onSurface",variant:"text",block:""}),e(k),e(n,{"prepend-icon":"mdi-logout",text:"Logout",class:"text-none justify-start rounded-b-xl",color:"onSurface",variant:"text",block:"",onClick:z,loading:p.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(U,{density:"compact",elevation:"0","scroll-behavior":"hide",extended:""},{prepend:a(()=>[e(L,{variant:"plain",color:"onBackground",density:"comfortable"})]),title:a(()=>[c("div",Q,[e($,{size:"small",class:"mx-2"},{default:a(()=>[e(q)]),_:1}),l[3]||(l[3]=S(" dukanet "))])]),append:a(()=>[e(n,{icon:"mdi-bell-outline",color:"onBackground",density:"comfortable",variant:"plain"}),e(n,{icon:"",density:"comfortable",onClick:l[2]||(l[2]=V(m=>s.value=!s.value,["stop"]))},{default:a(()=>[e(h,{color:"primary",size:"x-small"},{default:a(()=>[e(b,{src:v(t)},null,8,["src"])]),_:1})]),_:1})]),extension:a(()=>[e(R,{class:"px-4 pt-4",density:"compact","menu-icon":"",placeholder:"Search for Products","auto-select-first":"",rounded:"",variant:"outlined",color:"primary"},{"append-inner":a(()=>[e(n,{variant:"text",color:"primary",icon:"mdi-magnify",density:"compact"})]),_:1})]),_:1})],64))}}),ae=B({__name:"DefaultLayout",setup(o){return(t,i)=>{const f=T("RouterView");return C(),N(A,null,[e(X),e(O,null,{default:a(()=>[e(f)]),_:1}),e(P,null,{default:a(()=>i[0]||(i[0]=[S(" This is a footer ")])),_:1,__:[0]})],64)}}});export{ae as default};
