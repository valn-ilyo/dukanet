import{c as f,r as _,s as g,d as N,a as S,F as C,b as e,V as z,w as a,e as U,u as j,o as w,f as V,g as p,t as h,h as x,i as s,j as b,k,l as A,m as B,n as F,p as D,q as $,v as L,x as M,y as O,z as P,A as T}from"./index-BIIv-Eh-.js";import{l as q}from"./dukanet-icon-jE7Jovmw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const i=_(null);g.auth.getSession().then(({data:o})=>{var t;i.value=((t=o.session)==null?void 0:t.user)??null});g.auth.onAuthStateChange((o,t)=>{i.value=(t==null?void 0:t.user)??null});const E=f(()=>{var o,t;return((t=(o=i.value)==null?void 0:o.user_metadata)==null?void 0:t.avatar_url)??null}),H=f(()=>{var o,t;return((t=(o=i.value)==null?void 0:o.user_metadata)==null?void 0:t.email)??null}),W=f(()=>{var o,t;return((t=(o=i.value)==null?void 0:o.user_metadata)==null?void 0:t.full_name)??null});function Y(){return{avatarUrl:E,email:H,fullName:W}}const G={class:"w-100 position-relative pa-2 d-flex align-center justify-center"},J={class:"text-caption text-onSurfaceVariant"},K={class:"text-h6 barlow pa-2 text-onSurfaceVariant"},Q={class:"text-onBackground fill-height d-flex align-center justify-center"},X=N({__name:"DefaultAppbar",setup(o){const{avatarUrl:t,email:u,fullName:y}=Y(),{notify:c}=M(),m=j(),r=_(!1),d=_(!1),I=f(()=>{var n;return((n=y.value)==null?void 0:n.split(" ")[0])??""}),R=async()=>{d.value=!0;const{error:n}=await g.auth.signOut();n?c({message:"We couldn't sign you out. Please try again.",color:"error"}):m.push("/auth"),d.value=!1};return(n,l)=>(w(),S(C,null,[e(z,{color:"surfaceVariant",modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=v=>r.value=v),location:"right",temporary:""},{default:a(()=>[e(V,{color:"surfaceVariant",class:"d-flex flex-column align-center"},{default:a(()=>[p("div",G,[p("div",J,h(x(u)),1),e(s,{icon:"mdi-close",variant:"text",size:"x-small",color:"onSurfaceVariant",onClick:l[0]||(l[0]=b(v=>r.value=!r.value,["stop"])),class:"position-absolute right-0"})]),e(k,{color:"primary"},{default:a(()=>[e(A,{src:x(t)},null,8,["src"])]),_:1}),p("div",K,"Hi, "+h(I.value)+"!",1),e(V,{color:"surface",class:"rounded-xl"},{default:a(()=>[e(s,{"prepend-icon":"mdi-storefront-outline",text:"Add your business",class:"text-none justify-start rounded-t-xl",color:"onSurface",variant:"text",block:"",to:"/business"}),e(B),e(s,{"prepend-icon":"mdi-bookmark-outline",text:"Your saved items",class:"text-none justify-start",color:"onSurface",variant:"text",block:""}),e(B),e(s,{"prepend-icon":"mdi-logout",text:"Logout",class:"text-none justify-start rounded-b-xl",color:"onSurface",variant:"text",block:"",onClick:R,loading:d.value,disabled:d.value},null,8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(U,{density:"compact",elevation:"0","scroll-behavior":"hide",extended:""},{prepend:a(()=>[e(L,{variant:"plain",color:"onBackground",density:"comfortable"})]),title:a(()=>[p("div",Q,[e($,{size:"small",class:"mx-2"},{default:a(()=>[e(q)]),_:1}),l[3]||(l[3]=D(" dukanet "))])]),append:a(()=>[e(s,{icon:"mdi-bell-outline",color:"onBackground",density:"comfortable",variant:"plain"}),e(s,{icon:"",density:"comfortable",onClick:l[2]||(l[2]=b(v=>r.value=!r.value,["stop"]))},{default:a(()=>[e(k,{color:"primary",size:"x-small"},{default:a(()=>[e(A,{src:x(t)},null,8,["src"])]),_:1})]),_:1})]),extension:a(()=>[e(F,{class:"px-4 pt-4",density:"compact","menu-icon":"",placeholder:"Search for Products","auto-select-first":"",rounded:"",variant:"outlined",color:"primary"},{"append-inner":a(()=>[e(s,{variant:"text",color:"primary",icon:"mdi-magnify",density:"compact"})]),_:1})]),_:1})],64))}}),ae=N({__name:"DefaultLayout",setup(o){const t=j(),u=localStorage.getItem("postAuthRedirect");return u?(localStorage.removeItem("postAuthRedirect"),t.replace(u)):t.replace("/"),(y,c)=>{const m=T("RouterView");return w(),S(C,null,[e(X),e(O,null,{default:a(()=>[e(m)]),_:1}),e(P,null,{default:a(()=>c[0]||(c[0]=[D(" This is a footer ")])),_:1,__:[0]})],64)}}});export{ae as default};
